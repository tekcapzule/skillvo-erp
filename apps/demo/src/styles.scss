@use '@angular/material' as mat;
@use 'sass:map';

/* Import main styles including theme system */
@import '../../../styles/main.scss';

/* Import Material prebuilt theme as base */
@import '@angular/material/prebuilt-themes/indigo-pink.css';

/* Import Material Icons font */
@import url('https://fonts.googleapis.com/icon?family=Material+Icons');

/* Highlight.js theme */
@import 'highlight.js/styles/github.css';
@import url('https://fonts.googleapis.com/css2?family=Roboto+Mono:wght@400;500&display=swap');

/* Override Material theming with SkillVo theme variables */
:root {
  /* Material input field variables */
  --mdc-filled-text-field-container-color: var(--sv-bg-surface);
  --mdc-filled-text-field-label-text-color: var(--sv-text-secondary);
  --mdc-filled-text-field-input-text-color: var(--sv-text-primary);
  --mdc-filled-text-field-focus-active-indicator-color: var(--sv-primary);
  --mdc-filled-text-field-focus-label-text-color: var(--sv-primary);
  
  /* Material toolbar variables */
  --mat-toolbar-container-background-color: var(--sv-primary);
  --mat-toolbar-container-text-color: var(--sv-text-on-dark);
  
  /* Material sidenav variables */
  --mat-sidenav-container-background-color: var(--sv-bg-primary);
  --mat-sidenav-container-text-color: var(--sv-text-primary);
  
  /* Material card variables */
  --mat-card-background-color: var(--sv-bg-surface);
  --mat-card-subtitle-text-color: var(--sv-text-secondary);
  --mat-card-title-text-color: var(--sv-text-primary);
  
  /* Material expansion panel variables */
  --mat-expansion-container-background-color: var(--sv-bg-surface);
  --mat-expansion-header-hover-state-layer-color: var(--sv-bg-element-hover);
  --mat-expansion-header-text-color: var(--sv-text-primary);
  --mat-expansion-body-text-color: var(--sv-text-primary);

  /* Material list variables */
  --mat-list-item-unselected-hover-state-layer-color: var(--sv-bg-element-hover);
  --mat-list-item-hover-state-layer-color: var(--sv-bg-element-hover);
}

/* Global styles */
html, body {
  height: 100%;
  margin: 0;
  background-color: var(--sv-bg-primary);
  color: var(--sv-text-primary);
  transition: background-color 0.3s ease, color 0.3s ease;
}

body {
  font-family: Roboto, "Helvetica Neue", sans-serif;
}

/* Material component overrides */
.mat-mdc-card {
  background-color: var(--sv-bg-surface) !important;
  color: var(--sv-text-primary) !important;
  transition: background-color 0.3s ease, color 0.3s ease;
}

.mat-mdc-card-subtitle {
  color: var(--sv-text-secondary) !important;
}

.mat-mdc-card-title {
  color: var(--sv-text-primary) !important;
}

/* Material tabs theming */
.mat-mdc-tab-header {
  --mdc-tab-indicator-active-indicator-color: var(--sv-primary) !important;
  --mat-tab-header-active-label-text-color: var(--sv-primary) !important;
  --mat-tab-header-inactive-label-text-color: var(--sv-text-primary) !important;
  --mat-tab-header-active-ripple-color: var(--sv-primary-light) !important;
  --mat-tab-header-inactive-ripple-color: var(--sv-bg-element-hover) !important;
}

.mat-mdc-tab-header .mat-mdc-tab-label-container {
  background-color: var(--sv-bg-surface) !important;
}

.mat-mdc-tab-body-content {
  background-color: var(--sv-bg-surface) !important;
  color: var(--sv-text-primary) !important;
}

.mat-mdc-tab-header .mdc-tab-indicator__content--underline {
  border-color: var(--sv-primary) !important;
}

/* Fix expansion panel theming */
.mat-expansion-panel {
  background-color: var(--sv-bg-surface) !important;
  color: var(--sv-text-primary) !important;
}

.mat-expansion-panel-header {
  &:hover {
    background-color: var(--sv-bg-element-hover) !important;
  }
}

.mat-expansion-panel-header-title,
.mat-expansion-panel-header-description {
  color: var(--sv-text-primary) !important;
}

/* Fix list item theming */
.mat-mdc-list-item {
  color: var(--sv-text-primary) !important;
  
  &:hover {
    background-color: var(--sv-bg-element-hover);
  }
}

/* Add transitions for smooth theme changes */
.color-scheme-transition,
.color-scheme-transition *,
.color-scheme-transition *:before,
.color-scheme-transition *:after {
  transition: all 0.3s ease !important;
  transition-delay: 0 !important;
}

/* Ensure code examples display correctly in dark theme */
.code-example pre {
  background-color: var(--sv-bg-element) !important;
  color: var(--sv-text-primary) !important;
  border: 1px solid var(--sv-border-light);
}

/* Syntax highlighting styles - light theme */
.hljs {
  background: var(--sv-bg-element);
  color: var(--sv-text-primary);
}

.hljs-comment,
.hljs-quote {
  color: var(--sv-text-tertiary);
}

.hljs-keyword,
.hljs-selector-tag,
.hljs-built_in,
.hljs-name {
  color: var(--sv-primary);
}

.hljs-string,
.hljs-attr,
.hljs-attribute {
  color: var(--sv-secondary);
}

.hljs-number,
.hljs-literal,
.hljs-variable,
.hljs-template-variable,
.hljs-tag .hljs-attr {
  color: var(--sv-tertiary);
}

.hljs-title,
.hljs-section,
.hljs-selector-id {
  color: var(--sv-primary);
  font-weight: 500;
}

.hljs-subst {
  font-weight: normal;
}

// Fix for material expansion panel indicators in dark theme
[data-theme="dark"] {
  .mat-expansion-indicator::after,
  .mat-mdc-expansion-indicator::after {
    color: var(--sv-text-primary) !important;
    border-color: var(--sv-text-primary) !important;
  }
  
  // Additional selectors for different Angular Material versions
  .mat-expansion-panel-header-indicator svg,
  .mat-mdc-expansion-panel-header-indicator svg {
    fill: var(--sv-text-primary) !important;
  }

  // Override header toolbar in dark mode
  .mat-toolbar {
    background-color: var(--sv-bg-secondary) !important;
    color: var(--sv-text-primary) !important;
  }
  
  // Override playground panels
  .playground-tabs-container,
  .responsive-controls-container {
    background-color: var(--sv-bg-surface) !important;
    border-color: var(--sv-border-light) !important;
  }
  
  // Fix all panel backgrounds
  .playground-tab-content,
  .mat-card,
  .mat-expansion-panel {
    background-color: var(--sv-bg-surface) !important;
  }
  
  // Fix accordions in dark mode
  .mat-accordion {
    background-color: var(--sv-bg-surface) !important;
    
    .mat-expansion-panel {
      background-color: var(--sv-bg-surface) !important;
    }
  }

  /* Syntax highlighting overrides for dark mode - uses the same variables but with dark theme values */
  .hljs {
    background: var(--sv-bg-element);
    color: var(--sv-text-primary);
  }
  
  .hljs-comment,
  .hljs-quote {
    color: var(--sv-text-tertiary);
  }
  
  .hljs-keyword,
  .hljs-selector-tag,
  .hljs-subst {
    color: var(--sv-primary);
  }
  
  .hljs-number,
  .hljs-literal,
  .hljs-variable,
  .hljs-template-variable,
  .hljs-tag .hljs-attr {
    color: var(--sv-tertiary);
  }
  
  .hljs-string,
  .hljs-doctag {
    color: var(--sv-secondary);
  }
  
  .hljs-title,
  .hljs-section,
  .hljs-selector-id {
    color: var(--sv-primary);
    font-weight: bold;
  }
  
  .hljs-subst {
    font-weight: normal;
  }

  // More specific selectors for property accordions
  .mat-accordion .mat-expansion-panel {
    background-color: var(--sv-bg-surface); 
    
    .mat-expansion-panel-header {
      background-color: var(--sv-bg-element);
      
      &:hover {
        background-color: var(--sv-bg-element-hover) !important;
      }
      
      .mat-expansion-panel-header-title {
        color: var(--sv-text-primary);
      }
      
      .mat-expansion-panel-header-description {
        color: var(--sv-text-secondary);
      }
    }
    
    .mat-expansion-panel-body {
      background-color: var(--sv-bg-surface);
      color: var(--sv-text-primary);
    }
  }
  
  // Override more specific selectors for dark theme
  .mat-accordion .mat-expansion-panel {
    background-color: var(--sv-bg-surface) !important;
    
    .mat-expansion-panel-header {
      background-color: var(--sv-bg-element) !important;
    }
    
    .mat-expansion-panel-body {
      background-color: var(--sv-bg-surface) !important;
    }
  }
  
  // Override mat-card styling in dark theme
  .mat-mdc-card {
    background-color: var(--sv-bg-surface) !important;
  }
}
