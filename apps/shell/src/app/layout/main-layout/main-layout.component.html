<app-header (toggleSidenav)="toggleMobileNav()"></app-header>

<div class="main-content-container">
  <!-- Sidenav component - always present -->
  <app-sidenav 
    [collapsed]="sidenavCollapsed" 
    [mobileOpen]="mobileNavOpen"
    (toggleSidenav)="toggleSidenav()">
  </app-sidenav>
  
  <!-- Main content -->
  <div class="content-wrapper" [ngClass]="{'with-sidebar': !sidenavCollapsed && !isMobile, 'with-collapsed-sidebar': sidenavCollapsed && !isMobile}">
    <app-breadcrumb [sidenavCollapsed]="sidenavCollapsed"></app-breadcrumb>
    <app-announcements-bar></app-announcements-bar>
    <div class="content-container">
      <router-outlet></router-outlet>
    </div>
  </div>
</div>

<!-- Mobile backdrop overlay -->
<div 
  class="mobile-backdrop" 
  [class.active]="mobileNavOpen" 
  (click)="closeMobileNav()">
</div>

<!-- Floating Mobile Menu Button - only visible on mobile, moved to appear last in DOM -->
<button mat-fab class="mobile-fab-menu" [class.active]="mobileNavOpen" (click)="toggleMobileNav()" aria-label="Menu">
  <mat-icon>{{ mobileNavOpen ? 'close' : 'menu' }}</mat-icon>
</button> 