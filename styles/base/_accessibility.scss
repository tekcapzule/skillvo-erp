// ========================================
// Base Accessibility Styles
// ========================================
// Base accessibility styles that apply to HTML elements
// Uses variables from abstracts/_accessibility.scss

@use '../abstracts/accessibility' as a11y;
@use '../abstracts/a11y-mixins' as a11y-mix;

// ========================================
// Focus Styles
// ========================================

// Default focus styles for all elements
:focus {
  outline: var(--focus-ring-width) solid var(--focus-ring-color);
  outline-offset: var(--focus-ring-offset);
}

// Focus-visible support (keyboard only focus indicators)
:focus:not(:focus-visible) {
  outline: none;
}

:focus-visible {
  outline: var(--focus-ring-width) solid var(--focus-ring-color);
  outline-offset: var(--focus-ring-offset);
}

// ========================================
// Interactive Elements
// ========================================

// Make sure all interactive elements have proper focus indication
button,
[role="button"],
input,
select,
textarea,
a {
  &:focus-visible {
    outline: var(--focus-ring-width) solid var(--focus-ring-color);
    outline-offset: var(--focus-ring-offset);
  }
}

// Ensure buttons have reasonable defaults
button {
  cursor: pointer;
}

// Disabled state for interactive elements
[disabled],
.disabled {
  cursor: not-allowed;
  opacity: 0.6;
}

// ========================================
// Form Elements
// ========================================

// Ensure form fields have a minimum height for touchability
input,
select,
textarea,
button {
  min-height: var(--form-control-min-height);
}

// Ensure form labels are associated properly with form controls
label {
  display: block;
  margin-bottom: var(--space-2);
}

// ========================================
// Skip Link
// ========================================

// Skip link for keyboard navigation
.skip-to-content {
  @include a11y-mix.skip-link;
}

// ========================================
// Reduced Motion
// ========================================

// Apply reduced motion settings globally when user prefers it
@media (prefers-reduced-motion: reduce) {
  *,
  *::before,
  *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
    scroll-behavior: auto !important;
  }
}

// ========================================
// Touch Targets
// ========================================

// Ensure minimum touch target sizes for mobile devices
@media (pointer: coarse) {
  button,
  [role="button"],
  a.btn,
  .btn,
  input[type="button"],
  input[type="submit"],
  input[type="reset"],
  summary,
  select {
    min-width: var(--min-touch-target-size);
    min-height: var(--min-touch-target-size);
    padding: 8px 16px; // Reasonable padding for touch targets
  }
  
  // Add space between interactive elements
  button + button,
  .btn + .btn,
  input[type="button"] + input[type="button"],
  input[type="submit"] + input[type="submit"],
  input[type="reset"] + input[type="reset"] {
    margin-left: var(--min-interactive-spacing);
  }
}

// ========================================
// Image & Media Accessibility
// ========================================

// Ensure images have proper accessibility fallbacks
img {
  // Add a subtle border for images without src or with broken links
  &:not([src]),
  &[src=""],
  &[src="#"] {
    display: inline-block;
    border: 1px dashed var(--border-default);
    background-color: var(--bg-secondary);
    min-width: 20px;
    min-height: 20px;
  }
}

// Audio and video player styling (provide clearer controls)
audio,
video {
  width: 100%;
  
  &:focus {
    outline: var(--focus-ring-width) solid var(--focus-ring-color);
  }
}

// ========================================
// Tables
// ========================================

// Make tables more semantically appropriate
table {
  // Ensure all tables have captions for screen readers
  caption {
    caption-side: top;
    padding: var(--space-2) 0;
    font-weight: var(--font-semibold);
  }
  
  // Style table headers for clarity
  th {
    text-align: left;
    font-weight: var(--font-semibold);
  }
} 