/**
 * Panel Component - Component-level Styles
 * Version: 1.1.0
 * Last Updated: June 30, 2024
 * 
 * This file defines styles for the Panel component in the SkillVo design system.
 * It extends the container-control-base class and provides panel-specific styling.
 * Panels are sectioned containers that are used to group related content.
 */

/* ==========================================================================
   TABLE OF CONTENTS:
   
   1. VARIABLES & CONFIGURATION
   2. PANEL BASE CLASS
   3. PANEL VARIATIONS
      3.1 Panel Types
      3.2 Panel Sizes
      3.3 Panel Visual Styles
   4. PANEL ELEMENTS
      4.1 Panel Header
      4.2 Panel Body
      4.3 Panel Footer
   5. PANEL MODIFIERS
   6. RESPONSIVE BEHAVIORS
   ========================================================================== */

/* ==========================================================================
   1. VARIABLES & CONFIGURATION
   ========================================================================== */

// Import necessary mixins
@use './../../abstracts' as *;
@use './../../base/' as *;
@use './../../base/utils/mixins/state' as state;
@use './../../base/utils/mixins/layout' as layout;
@use './../../base/utils/mixins/responsive' as responsive;

// Panel-specific variables
$panel-border-width: 1px;
$panel-default-radius: var(--sv-radius-md);
$panel-default-shadow: var(--sv-shadow-sm);
$panel-header-padding: var(--sv-space-4);
$panel-body-padding: var(--sv-space-4);
$panel-footer-padding: var(--sv-space-4);
$panel-border-color: var(--sv-border-light);
$panel-header-border-color: var(--sv-border-light);
$panel-footer-border-color: var(--sv-border-light);
$panel-title-font-size: var(--sv-font-size-lg);
$panel-title-font-weight: var(--sv-font-weight-semibold);
$panel-subtitle-font-size: var(--sv-font-size-base);
$panel-subtitle-font-weight: var(--sv-font-weight-normal);
$panel-subtitle-color: var(--sv-text-secondary);

/* ==========================================================================
   2. PANEL BASE CLASS
   ========================================================================== */

/**
 * The sv-panel class extends sv-container-control-base and represents a structural
 * container for grouping related content with distinct header, body, and footer sections.
 */
.sv-panel {
  // Extend the container control base class
  @extend .sv-container-control-base ;
  
  // Panel-specific overrides - only add what's different from the base
  border-radius: $panel-default-radius;
  box-shadow: $panel-default-shadow;
  display: flex;
  flex-direction: column;
  border: $panel-border-width solid $panel-border-color;
  
  // Use BEM-style naming for panel elements to match container-control-base pattern
  &__header {
    padding: $panel-header-padding;
    display: flex;
    flex-direction: row;
    align-items: center;
    justify-content: space-between;
    border-bottom: $panel-border-width solid $panel-header-border-color;
    min-height: 48px;
    
    // Header variations
    &--no-border {
      border-bottom: none;
    }
    
    &--centered {
      justify-content: center;
      text-align: center;
    }
  }
  
  &__body {
    padding: $panel-body-padding;
    flex: 1 1 auto;
  }
  
  &__footer {
    padding: $panel-footer-padding;
    border-top: $panel-border-width solid $panel-footer-border-color;
    display: flex;
    align-items: center;
    
    &--no-border {
      border-top: none;
    }
    
    &--end {
      justify-content: flex-end;
      gap: var(--sv-space-2);
    }
    
    &--center {
      justify-content: center;
      gap: var(--sv-space-2);
    }
    
    &--between {
      justify-content: space-between;
    }
  }
  
  &__title {
    margin: 0;
    font-size: $panel-title-font-size;
    font-weight: $panel-title-font-weight;
    color: var(--sv-text-primary);
  }
  
  &__subtitle {
    margin: var(--sv-space-1) 0 0;
    font-size: $panel-subtitle-font-size;
    font-weight: $panel-subtitle-font-weight;
    color: $panel-subtitle-color;
  }
  
  &__content {
    display: flex;
    flex-direction: column;
    flex: 1;
  }
}

/* ==========================================================================
   3. PANEL VARIATIONS
   ========================================================================== */

/* 3.1 Panel Types
   ========================================================================== */

.sv-panel {
  // Basic panel with minimal styling
  &--basic {
    box-shadow: none;
  }
  
  // Elevated panel with more prominent shadow
  &--elevated {
    box-shadow: var(--sv-shadow-md);
  }
  
  // Panel with no border or shadow
  &--flat {
    box-shadow: none;
    border: none;
    background-color: var(--sv-bg-element);
  }
  
  // Panel with a more subtle background
  &--subtle {
    background-color: var(--sv-bg-secondary);
  }
  
  // Panel specifically for forms
  &--form {
    .sv-panel__body {
      padding: var(--sv-space-6);
    }
    
    .sv-panel__footer {
      background-color: var(--sv-bg-secondary);
      justify-content: flex-end;
      gap: var(--sv-space-2);
    }
  }
  
  // Status-colored panels
  &--info {
    border-left: 4px solid var(--sv-info);
    
    .sv-panel__header {
      background-color: rgba(var(--sv-info-rgb), 0.05);
    }
  }
  
  &--success {
    border-left: 4px solid var(--sv-success);
    
    .sv-panel__header {
      background-color: rgba(var(--sv-success-rgb), 0.05);
    }
  }
  
  &--warning {
    border-left: 4px solid var(--sv-warning);
    
    .sv-panel__header {
      background-color: rgba(var(--sv-warning-rgb), 0.05);
    }
  }
  
  &--error {
    border-left: 4px solid var(--sv-error);
    
    .sv-panel__header {
      background-color: rgba(var(--sv-error-rgb), 0.05);
    }
  }
}

/* 3.2 Panel Sizes
   ========================================================================== */

.sv-panel {
  // Compact panel with smaller padding
  &--compact {
    .sv-panel__header,
    .sv-panel__body,
    .sv-panel__footer {
      padding: var(--sv-space-2);
    }
  }
  
  // Comfortable panel with larger padding
  &--comfortable {
    .sv-panel__header,
    .sv-panel__body,
    .sv-panel__footer {
      padding: var(--sv-space-6);
    }
  }
  
  // Full-height panel
  &--full-height {
    height: 100%;
    
    .sv-panel__body {
      flex: 1 1 auto;
      overflow-y: auto;
    }
  }
}

/* 3.3 Panel Visual Styles
   ========================================================================== */

.sv-panel {
  // Panel with rounded corners
  &--rounded {
    border-radius: var(--sv-radius-lg);
  }
  
  // Panel with more square corners
  &--square {
    border-radius: var(--sv-radius-sm);
  }
  
  // Panel with highlighted border
  &--highlighted {
    border-color: var(--sv-primary);
    border-width: 2px;
  }
  
  // Panel with a colored background
  &--colored {
    background-color: var(--sv-bg-secondary);
    
    &.sv-panel--primary {
      background-color: rgba(var(--sv-primary-rgb), 0.05);
    }
    
    &.sv-panel--info {
      background-color: rgba(var(--sv-info-rgb), 0.05);
    }
    
    &.sv-panel--success {
      background-color: rgba(var(--sv-success-rgb), 0.05);
    }
    
    &.sv-panel--warning {
      background-color: rgba(var(--sv-warning-rgb), 0.05);
    }
    
    &.sv-panel--error {
      background-color: rgba(var(--sv-error-rgb), 0.05);
    }
  }
  
  // Panel with collapsible content
  &--collapsible {
    .sv-panel__header {
      cursor: pointer;
      
      &::after {
        content: "â–¼";
        font-size: 10px;
        margin-left: var(--sv-space-2);
        transition: transform var(--sv-motion-duration-short) var(--sv-motion-ease-standard);
      }
    }
    
    &.sv-panel--collapsed {
      .sv-panel__header::after {
        transform: rotate(-90deg);
      }
      
      .sv-panel__body {
        display: none;
      }
    }
  }
}

/* ==========================================================================
   4. PANEL ELEMENTS
   ========================================================================== */

/* 4.1 Panel Header
   ========================================================================== */

.sv-panel-header {
  padding: $panel-header-padding;
  display: flex;
  flex-direction: row;
  align-items: center;
  justify-content: space-between;
  border-bottom: 1px solid $panel-header-border-color;
  min-height: 48px;
  
  // Header without border
  &.sv-panel-header-no-border {
    border-bottom: none;
  }
  
  // Colored headers
  &.sv-panel-header-primary {
    background-color: var(--sv-primary);
    color: var(--sv-text-on-dark);
  }
  
  &.sv-panel-header-secondary {
    background-color: var(--sv-secondary);
    color: var(--sv-text-on-dark);
  }
  
  // Left section of the header (typically contains title)
  .sv-panel-header-left {
    display: flex;
    flex-direction: column;
    justify-content: center;
    flex: 1;
  }
  
  // Right section of the header (typically contains actions)
  .sv-panel-header-right {
    display: flex;
    align-items: center;
    gap: var(--sv-space-sm);
  }
}

// Panel title styling
.sv-panel-title {
  margin: 0;
  font-size: $panel-title-font-size;
  font-weight: $panel-title-font-weight;
  color: inherit;
  line-height: var(--sv-leading-tight);
}

// Panel subtitle styling
.sv-panel-subtitle {
  margin: var(--sv-space-xs) 0 0;
  font-size: $panel-subtitle-font-size;
  font-weight: $panel-subtitle-font-weight;
  color: $panel-subtitle-color;
  line-height: var(--sv-leading-normal);
}

// Panel with collapsible header
.sv-panel-collapsible {
  .sv-panel-header {
    cursor: pointer;
    user-select: none;
    
    &::after {
      content: "";
      width: 10px;
      height: 10px;
      border-right: 2px solid currentColor;
      border-bottom: 2px solid currentColor;
      transform: rotate(45deg);
      transition: transform 0.2s ease;
      margin-left: var(--sv-space-xs);
    }
    
    &[aria-expanded="true"]::after {
      transform: rotate(-135deg);
    }
  }
  
  .sv-panel-body {
    transition: max-height 0.3s ease, padding 0.3s ease;
    overflow: hidden;
    
    &[aria-hidden="true"] {
      max-height: 0;
      padding-top: 0;
      padding-bottom: 0;
      border-top: none;
    }
  }
}

/* 4.2 Panel Body
   ========================================================================== */

.sv-panel-body {
  padding: $panel-body-padding;
  flex: 1 1 auto;
  
  // Body variations
  &.sv-panel-body-no-padding {
    padding: 0;
  }
  
  &.sv-panel-body-compact {
    padding: var(--sv-padding-sm);
  }
  
  &.sv-panel-body-comfortable {
    padding: var(--sv-padding-lg);
  }
  
  // Scrollable body
  &.sv-panel-body-scrollable {
    overflow-y: auto;
    max-height: 400px;
  }
}

/* 4.3 Panel Footer
   ========================================================================== */

.sv-panel-footer {
  padding: $panel-footer-padding;
  border-top: 1px solid $panel-footer-border-color;
  display: flex;
  flex-direction: row;
  align-items: center;
  
  // Footer variations
  &.sv-panel-footer-no-border {
    border-top: none;
  }
  
  &.sv-panel-footer-end {
    justify-content: flex-end;
  }
  
  &.sv-panel-footer-between {
    justify-content: space-between;
  }
  
  &.sv-panel-footer-center {
    justify-content: center;
  }
  
  &.sv-panel-footer-column {
    flex-direction: column;
    align-items: flex-start;
  }
  
  // Subtle footer background
  &.sv-panel-footer-subtle {
    background-color: var(--sv-bg-secondary);
  }
}

/* 4.4 Panel Actions
   ========================================================================== */

.sv-panel-actions {
  display: flex;
  align-items: center;
  gap: var(--sv-space-sm);
  
  // Aligned to the right
  &.sv-panel-actions-end {
    justify-content: flex-end;
  }
  
  // Compact spacing
  &.sv-panel-actions-compact {
    gap: var(--sv-space-xs);
  }
  
  // Vertical orientation
  &.sv-panel-actions-vertical {
    flex-direction: column;
    align-items: flex-start;
  }
}

/* ==========================================================================
   5. PANEL MODIFIERS
   ========================================================================== */

// Panel with dividers between all sections
.sv-panel-dividers {
  .sv-panel-header {
    border-bottom: 1px solid $panel-header-border-color;
  }
  
  .sv-panel-footer {
    border-top: 1px solid $panel-footer-border-color;
  }
}

// Panel with no dividers
.sv-panel-no-dividers {
  .sv-panel-header {
    border-bottom: none;
  }
  
  .sv-panel-footer {
    border-top: none;
  }
}

// Panel with a loading state
.sv-panel-loading {
  position: relative;
  pointer-events: none;
  
  &::after {
    content: "";
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background-color: rgba(255, 255, 255, 0.5);
    display: flex;
    align-items: center;
    justify-content: center;
    z-index: 1;
  }
  
  &::before {
    content: "";
    position: absolute;
    top: 50%;
    left: 50%;
    z-index: 2;
    width: 24px;
    height: 24px;
    margin: -12px 0 0 -12px;
    border-radius: 50%;
    border: 2px solid rgba(var(--sv-primary-500-rgb), 0.3);
    border-top-color: var(--sv-primary);
    animation: spin 0.8s linear infinite;
  }
  
  @keyframes spin {
    to { transform: rotate(360deg); }
  }
}

// Floating panel (common in dashboards)
.sv-panel-floating {
  box-shadow: var(--sv-shadow-lg);
  border: none;
  position: relative;
  z-index: 1;
}

// Panel with a gradient background
.sv-panel-gradient {
  background: linear-gradient(to right, 
    var(--sv-bg-primary), 
    var(--sv-bg-secondary));
  border: none;
}

// Panel with a transparent background
.sv-panel-transparent {
  background-color: transparent;
  border: none;
  box-shadow: none;
}

/* ==========================================================================
   6. RESPONSIVE BEHAVIORS
   ========================================================================== */

// Responsive adjustments for small screens
@include responsive.breakpoint-down(sm) {
  .sv-panel {
    .sv-panel-header,
    .sv-panel-body,
    .sv-panel-footer {
      padding: var(--sv-padding-sm);
    }
    
    .sv-panel-title {
      font-size: var(--sv-text-heading-sm);
    }
    
    .sv-panel-subtitle {
      font-size: var(--sv-text-body-sm);
    }
  }
  
  // Stack header elements on small screens
  .sv-panel-header {
    flex-direction: column;
    align-items: flex-start;
    
    .sv-panel-header-right {
      margin-top: var(--sv-space-sm);
      width: 100%;
      justify-content: flex-end;
    }
  }
  
  // Adjust footer layout on small screens
  .sv-panel-footer {
    flex-wrap: wrap;
    gap: var(--sv-space-sm);
    
    &.sv-panel-footer-between {
      justify-content: center;
    }
  }
  
  // Make actions full-width on small screens
  .sv-panel-actions {
    width: 100%;
    flex-wrap: wrap;
    justify-content: center;
    
    button, a {
      flex: 1 1 auto;
    }
  }
}

// Medium screens adjustments
@include responsive.breakpoint-between(md, lg) {
  .sv-panel {
    .sv-panel-header {
      .sv-panel-header-right {
        flex-wrap: wrap;
      }
    }
  }
}