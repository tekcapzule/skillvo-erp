/**
 * Card Component - Component-level Styles
 * Version: 1.0.0
 * Last Updated: April 29, 2025
 * 
 * This file defines styles for the Card component in the SkillVo design system.
 * It extends the container base class and provides card-specific styling.
 */

/* ==========================================================================
   TABLE OF CONTENTS:
   
   1. VARIABLES & CONFIGURATION
   2. CARD BASE CLASS
   3. CARD VARIATIONS
      3.1 Card Types
      3.2 Card Sizes
      3.3 Card Visual Styles
   4. CARD ELEMENTS
      4.1 Card Header
      4.2 Card Body
      4.3 Card Footer
      4.4 Card Media
   5. CARD MODIFIERS
   6. RESPONSIVE BEHAVIORS
   ========================================================================== */

/* ==========================================================================
   1. VARIABLES & CONFIGURATION
   ========================================================================== */

// Import necessary mixins
@use './abstracts' as *;
@use './base' as *;
// Card-specific variables
$card-default-radius: var(--sv-radius-md);
$card-default-shadow: var(--sv-shadow-md);
$card-default-padding: var(--sv-padding-md);
$card-header-padding: var(--sv-padding-md);
$card-body-padding: var(--sv-padding-md);
$card-footer-padding: var(--sv-padding-md);
$card-border-color: var(--sv-border-light);
$card-header-border-color: var(--sv-border-light);
$card-footer-border-color: var(--sv-border-light);
$card-title-font-size: var(--sv-text-heading-md);
$card-title-font-weight: var(--sv-font-semibold);
$card-subtitle-font-size: var(--sv-text-body-md);
$card-subtitle-font-weight: var(--sv-font-normal);
$card-subtitle-color: var(--sv-text-secondary);
$card-media-aspect-ratio: 16/9;

/* ==========================================================================
   2. CARD BASE CLASS
   ========================================================================== */

.sv-card {
  // Extend the container base class
  @extend .sv-container-base;
  
  // Card-specific overrides
  border-radius: $card-default-radius;
  box-shadow: $card-default-shadow;
  padding: 0; // Override the default container padding
  background-color: var(--sv-bg-surface);
  display: flex;
  flex-direction: column;
  overflow: hidden; // Ensures media content doesn't overflow rounded corners
  height: auto; // Cards naturally size to content
  
  // Enhanced hover effect for interactive cards
  &.sv-card-interactive {
    transition: transform 0.2s ease, box-shadow 0.2s ease;
    cursor: pointer;
    
    &:hover {
      transform: translateY(-4px);
      box-shadow: var(--sv-shadow-lg);
    }
    
    &:active {
      transform: translateY(-2px);
      box-shadow: var(--sv-shadow-md);
    }
  }
}

/* ==========================================================================
   3. CARD VARIATIONS
   ========================================================================== */

/* 3.1 Card Types
   ========================================================================== */

// Basic card with minimal styling
.sv-card-basic {
  box-shadow: none;
  border: 1px solid $card-border-color;
}

// Elevated card with prominent shadow
.sv-card-elevated {
  box-shadow: var(--sv-shadow-lg);
}

// Outlined card with no shadow
.sv-card-outlined {
  box-shadow: none;
  border: 1px solid $card-border-color;
}

// Card with no border or shadow
.sv-card-flat {
  box-shadow: none;
  border: none;
  background-color: var(--sv-bg-element);
}

// Card optimized for horizontal layout
.sv-card-horizontal {
  flex-direction: row;
  
  // Media behavior in horizontal card
  .sv-card-media {
    width: 33.333%;
    height: auto;
    
    img, picture {
      height: 100%;
      object-fit: cover;
      object-position: center;
    }
  }
  
  // Content adjustment in horizontal card
  .sv-card-content {
    width: 66.666%;
    display: flex;
    flex-direction: column;
  }
  
  // Media queries for responsive behavior
  @include breakpoint-down(md) {
    flex-direction: column;
    
    .sv-card-media,
    .sv-card-content {
      width: 100%;
    }
  }
}

/* 3.2 Card Sizes
   ========================================================================== */

// Compact card with smaller padding
.sv-card-compact {
  .sv-card-header,
  .sv-card-body,
  .sv-card-footer {
    padding: var(--sv-padding-sm);
  }
}

// Comfortable card with larger padding
.sv-card-comfortable {
  .sv-card-header,
  .sv-card-body,
  .sv-card-footer {
    padding: var(--sv-padding-lg);
  }
}

/* 3.3 Card Visual Styles
   ========================================================================== */

// Card with rounded corners
.sv-card-rounded {
  border-radius: var(--sv-radius-lg);
}

// Card with more square corners
.sv-card-square {
  border-radius: var(--sv-radius-sm);
}

// Card with highlighted border
.sv-card-highlighted {
  border-color: var(--sv-primary);
  border-width: 2px;
}

// Card with accent color strip
.sv-card-accent {
  position: relative;
  
  &::before {
    content: "";
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 4px;
    background-color: var(--sv-primary);
  }
  
  &.sv-card-accent-left::before {
    width: 4px;
    height: 100%;
  }
  
  &.sv-card-accent-right::before {
    width: 4px;
    height: 100%;
    left: auto;
    right: 0;
  }
  
  &.sv-card-accent-bottom::before {
    top: auto;
    bottom: 0;
  }
}

/* ==========================================================================
   4. CARD ELEMENTS
   ========================================================================== */

/* 4.1 Card Header
   ========================================================================== */

.sv-card-header {
  padding: $card-header-padding;
  display: flex;
  flex-direction: column;
  border-bottom: 1px solid $card-header-border-color;
  
  // Header variations
  &.sv-card-header-no-border {
    border-bottom: none;
  }
  
  // Header with horizontal layout
  &.sv-card-header-row {
    flex-direction: row;
    align-items: center;
    justify-content: space-between;
  }
  
  // Header with avatar/icon
  &.sv-card-header-with-avatar {
    display: flex;
    flex-direction: row;
    align-items: center;
    
    .sv-card-avatar {
      margin-right: var(--sv-space-sm);
    }
  }
}

// Card title styling
.sv-card-title {
  margin: 0;
  font-size: $card-title-font-size;
  font-weight: $card-title-font-weight;
  color: var(--sv-text-primary);
  line-height: var(--sv-leading-tight);
}

// Card subtitle styling
.sv-card-subtitle {
  margin: var(--sv-space-xs) 0 0;
  font-size: $card-subtitle-font-size;
  font-weight: $card-subtitle-font-weight;
  color: $card-subtitle-color;
  line-height: var(--sv-leading-normal);
}

// Card avatar/icon container
.sv-card-avatar {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 40px;
  height: 40px;
  border-radius: var(--sv-radius-full);
  background-color: var(--sv-bg-element);
  overflow: hidden;
  
  img {
    width: 100%;
    height: 100%;
    object-fit: cover;
  }
  
  &.sv-card-avatar-sm {
    width: 32px;
    height: 32px;
  }
  
  &.sv-card-avatar-lg {
    width: 48px;
    height: 48px;
  }
}

/* 4.2 Card Body
   ========================================================================== */

.sv-card-body {
  padding: $card-body-padding;
  flex: 1 1 auto;
  
  // Body variations
  &.sv-card-body-no-padding {
    padding: 0;
  }
  
  &.sv-card-body-compact {
    padding: var(--sv-padding-sm);
  }
  
  &.sv-card-body-comfortable {
    padding: var(--sv-padding-lg);
  }
}

/* 4.3 Card Footer
   ========================================================================== */

.sv-card-footer {
  padding: $card-footer-padding;
  border-top: 1px solid $card-footer-border-color;
  display: flex;
  flex-direction: row;
  align-items: center;
  
  // Footer variations
  &.sv-card-footer-no-border {
    border-top: none;
  }
  
  &.sv-card-footer-end {
    justify-content: flex-end;
  }
  
  &.sv-card-footer-between {
    justify-content: space-between;
  }
  
  &.sv-card-footer-center {
    justify-content: center;
  }
  
  &.sv-card-footer-column {
    flex-direction: column;
    align-items: flex-start;
  }
}

/* 4.4 Card Media
   ========================================================================== */

.sv-card-media {
  position: relative;
  width: 100%;
  overflow: hidden;
  
  // Default aspect ratio
  &:not(.sv-card-media-free) {
    padding-top: calc(100% / $card-media-aspect-ratio); // Default 16:9
  }
  
  img, picture, video {
    width: 100%;
    display: block;
  }
  
  img, picture {
    object-fit: cover;
    object-position: center;
  }
  
  // For aspect ratio implementation
  &:not(.sv-card-media-free) {
    img, picture, video {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
    }
  }
  
  // Media with overlay text
  .sv-card-media-overlay {
    position: absolute;
    bottom: 0;
    left: 0;
    right: 0;
    padding: var(--sv-padding-md);
    background: linear-gradient(to top, rgba(0, 0, 0, 0.8), transparent);
    color: var(--sv-text-on-dark);
  }
  
  // Media with content overlay (fully covering image)
  .sv-card-media-content {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    background-color: rgba(0, 0, 0, 0.5);
    color: var(--sv-text-on-dark);
    opacity: 0;
    transition: opacity 0.2s ease;
    
    &.sv-card-media-content-visible {
      opacity: 1;
    }
  }
}

// Different aspect ratios
.sv-card-media-1x1 {
  padding-top: 100%;
}

.sv-card-media-4x3 {
  padding-top: calc(100% * 3/4);
}

.sv-card-media-16x9 {
  padding-top: calc(100% * 9/16);
}

.sv-card-media-21x9 {
  padding-top: calc(100% * 9/21);
}

// Free aspect ratio (determined by content)
.sv-card-media-free {
  padding-top: 0;
}

/* ==========================================================================
   5. CARD MODIFIERS
   ========================================================================== */

// Card with dividers between all sections
.sv-card-dividers {
  .sv-card-header {
    border-bottom: 1px solid $card-header-border-color;
  }
  
  .sv-card-footer {
    border-top: 1px solid $card-footer-border-color;
  }
}

// Card with no dividers
.sv-card-no-dividers {
  .sv-card-header {
    border-bottom: none;
  }
  
  .sv-card-footer {
    border-top: none;
  }
}

// Card loading state
.sv-card-loading {
  pointer-events: none;
  position: relative;
  overflow: hidden;
  
  &::after {
    content: "";
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: linear-gradient(90deg, 
      rgba(255, 255, 255, 0) 0%, 
      rgba(255, 255, 255, 0.2) 50%, 
      rgba(255, 255, 255, 0) 100%);
    animation: shimmer 1.5s infinite;
    transform: translateX(-100%);
  }
  
  @keyframes shimmer {
    100% {
      transform: translateX(100%);
    }
  }
  
  .sv-card-body * {
    color: transparent !important;
    background-color: var(--sv-bg-element-hover) !important;
    border-color: transparent !important;
  }
}

// Card with scrollable content
.sv-card-scrollable {
  max-height: 400px;
  
  .sv-card-body {
    overflow-y: auto;
    max-height: 100%;
  }
}

/* ==========================================================================
   6. RESPONSIVE BEHAVIORS
   ========================================================================== */

// Responsive adjustments for small screens
@include breakpoint-down(sm) {
  .sv-card {
    .sv-card-header,
    .sv-card-body,
    .sv-card-footer {
      padding: var(--sv-padding-sm);
    }
    
    .sv-card-title {
      font-size: var(--sv-text-heading-sm);
    }
    
    .sv-card-subtitle {
      font-size: var(--sv-text-body-sm);
    }
  }
  
  // Stack horizontal card elements on small screens
  .sv-card-horizontal {
    flex-direction: column;
    
    .sv-card-media,
    .sv-card-content {
      width: 100%;
    }
  }
  
  // Adjust avatar size on small screens
  .sv-card-avatar {
    width: 32px;
    height: 32px;
  }
  
  // Adjust footer layout on small screens
  .sv-card-footer {
    flex-wrap: wrap;
    gap: var(--sv-space-sm);
    
    &.sv-card-footer-between {
      justify-content: center;
    }
  }
}

// Medium screens adjustments for horizontal cards
@include breakpoint-between(md, lg) {
  .sv-card-horizontal {
    .sv-card-media {
      width: 40%;
    }
    
    .sv-card-content {
      width: 60%;
    }
  }
}