/**
 * Floating Action Button (FAB) Component - Specific Styles
 * Version: 1.1.0
 * Last Updated: June 30, 2024
 * 
 * This file establishes the specific styles for the floating action button component
 * in the SkillVo design system. This serves as the third level in our 
 * three-tier styling architecture:
 * 1. sv-ui-control-base - Base styles for all interactive controls
 * 2. sv-action-control-base - Base styles for action controls
 * 3. sv-fab (this file) - Component-specific styles for floating action buttons
 */

/* ==========================================================================
   TABLE OF CONTENTS:
   
   1. IMPORTS
   2. FLOATING ACTION BUTTON BASE
   3. FAB VARIANTS
   4. FAB SIZES
   5. FAB POSITIONS
   6. FAB ANIMATIONS
   7. FAB ACCESSIBILITY
   8. EXTENDED FAB (WITH TEXT)
   ========================================================================== */

/* ==========================================================================
   1. IMPORTS
   ========================================================================== */
@use './../../abstracts/' as *;
@use './../../base/' as *;

/* ==========================================================================
   2. FLOATING ACTION BUTTON BASE
   ========================================================================== */

.sv-fab {
  // Extend the action control base to inherit all shared properties
  @extend .sv-action-control-base;
  
  // FAB-specific properties
  position: fixed;
  z-index: var(--sv-z-index-fab);
  border-radius: var(--sv-radius-full);
  box-shadow: var(--sv-shadow-lg);
  aspect-ratio: 1/1;
  padding: var(--sv-space-3);
  
  // Sizing for icons within FAB
  > .sv-icon {
    width: var(--sv-icon-size-lg);
    height: var(--sv-icon-size-lg);
  }
  
  // Default positioning (bottom right)
  bottom: var(--sv-space-4);
  right: var(--sv-space-4);
  
  // Custom hover effect
  &:hover:not(:disabled):not(.disabled) {
    transform: translateY(-4px);
    box-shadow: var(--sv-shadow-xl);
  }
  
  // Custom active effect
  &:active:not(:disabled):not(.disabled) {
    transform: translateY(0);
    box-shadow: var(--sv-shadow-md);
  }
}

/* ==========================================================================
   3. FAB VARIANTS
   ========================================================================== */

.sv-fab {
  // Primary FAB (default)
  &.sv-fab-primary {
    @extend .sv-action-primary;
  }
  
  // Secondary FAB
  &.sv-fab-secondary {
    @extend .sv-action-secondary;
  }
  
  // Subtle FAB
  &.sv-fab-subtle {
    background-color: var(--sv-bg-element);
    color: var(--sv-text-primary);
    border-color: var(--sv-border-light);
    
    &:hover:not(:disabled):not(.disabled) {
      background-color: var(--sv-bg-element-hover);
      color: var(--sv-primary);
    }
  }
  
  // Branded FAB
  &.sv-fab-branded {
    background-color: var(--sv-brand-primary);
    color: var(--sv-text-on-dark);
    border-color: var(--sv-brand-primary);
    
    &:hover:not(:disabled):not(.disabled) {
      background-color: var(--sv-brand-primary-dark);
      border-color: var(--sv-brand-primary-dark);
    }
  }
}

/* ==========================================================================
   4. FAB SIZES
   ========================================================================== */

.sv-fab {
  // Small FAB
  &.sv-size-sm {
    padding: var(--sv-space-2);
    
    > .sv-icon {
      width: var(--sv-icon-size-md);
      height: var(--sv-icon-size-md);
    }
  }
  
  // Large FAB
  &.sv-size-lg {
    padding: var(--sv-space-4);
    
    > .sv-icon {
      width: var(--sv-icon-size-xl);
      height: var(--sv-icon-size-xl);
    }
  }
}

/* ==========================================================================
   5. FAB POSITIONS
   ========================================================================== */

.sv-fab {
  // Position variants
  &.sv-fab-bottom-right {
    bottom: var(--sv-space-4);
    right: var(--sv-space-4);
  }
  
  &.sv-fab-bottom-left {
    bottom: var(--sv-space-4);
    left: var(--sv-space-4);
  }
  
  &.sv-fab-top-right {
    top: var(--sv-space-4);
    right: var(--sv-space-4);
    bottom: auto;
  }
  
  &.sv-fab-top-left {
    top: var(--sv-space-4);
    left: var(--sv-space-4);
    bottom: auto;
    right: auto;
  }
  
  &.sv-fab-center-right {
    top: 50%;
    right: var(--sv-space-4);
    bottom: auto;
    transform: translateY(-50%);
    
    &:hover:not(:disabled):not(.disabled) {
      transform: translate(-4px, -50%);
    }
    
    &:active:not(:disabled):not(.disabled) {
      transform: translateY(-50%);
    }
  }
  
  &.sv-fab-center-left {
    top: 50%;
    left: var(--sv-space-4);
    bottom: auto;
    right: auto;
    transform: translateY(-50%);
    
    &:hover:not(:disabled):not(.disabled) {
      transform: translate(4px, -50%);
    }
    
    &:active:not(:disabled):not(.disabled) {
      transform: translateY(-50%);
    }
  }
  
  // Adjustable position (using CSS custom properties)
  &.sv-fab-custom-position {
    top: var(--sv-fab-top, auto);
    right: var(--sv-fab-right, auto);
    bottom: var(--sv-fab-bottom, auto);
    left: var(--sv-fab-left, auto);
  }
}

/* ==========================================================================
   6. FAB ANIMATIONS
   ========================================================================== */

.sv-fab {
  // Entrance animation
  &.sv-fab-animate-in {
    animation: fab-entrance 0.3s var(--sv-motion-ease-accelerate);
    
    @keyframes fab-entrance {
      from {
        opacity: 0;
        transform: scale(0.8) translateY(20px);
      }
      to {
        opacity: 1;
        transform: scale(1) translateY(0);
      }
    }
  }
  
  // Pulse animation for attention
  &.sv-fab-pulse {
    animation: fab-pulse 2s infinite;
    
    @keyframes fab-pulse {
      0% {
        box-shadow: 0 0 0 0 rgba(var(--sv-primary-500-rgb), 0.7);
      }
      70% {
        box-shadow: 0 0 0 15px rgba(var(--sv-primary-500-rgb), 0);
      }
      100% {
        box-shadow: 0 0 0 0 rgba(var(--sv-primary-500-rgb), 0);
      }
    }
  }
  
  // Respect reduced motion preferences
  @media (prefers-reduced-motion: reduce) {
    &.sv-fab-animate-in, &.sv-fab-pulse {
      animation: none;
    }
  }
}

/* ==========================================================================
   7. FAB ACCESSIBILITY
   ========================================================================== */

.sv-fab {
  // Enhanced focus visibility
  &:focus-visible {
    outline: var(--sv-focus-ring-width) solid var(--sv-focus-ring-color);
    outline-offset: var(--sv-focus-ring-offset);
  }
  
  // Screen reader text
  .sv-sr-only {
    position: absolute;
    width: 1px;
    height: 1px;
    padding: 0;
    margin: -1px;
    overflow: hidden;
    clip: rect(0, 0, 0, 0);
    white-space: nowrap;
    border-width: 0;
  }
}

/* ==========================================================================
   8. EXTENDED FAB (WITH TEXT)
   ========================================================================== */

.sv-fab {
  // Extended FAB with text label
  &.sv-fab-extended {
    aspect-ratio: auto;
    padding: var(--sv-space-2) var(--sv-space-4);
    border-radius: var(--sv-radius-full);
    display: inline-flex;
    align-items: center;
    
    // Spacing between icon and text
    > .sv-icon + span,
    > span + .sv-icon {
      margin-left: var(--sv-space-2);
    }
    
    // Text styling
    > span {
      font-weight: var(--sv-font-medium);
      letter-spacing: 0.5px;
    }
    
    // Collapse to normal FAB on mobile if needed
    &.sv-fab-collapse-on-mobile {
      @media (max-width: 576px) {
        aspect-ratio: 1/1;
        padding: var(--sv-space-3);
        
        > span {
          display: none;
        }
        
        > .sv-icon {
          margin: 0;
        }
      }
    }
  }
}