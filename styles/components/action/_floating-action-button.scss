/**
 * Floating Action Button (FAB) Component - Specific Styles
 * Version: 1.1.0
 * Last Updated: June 30, 2024
 * 
 * This file establishes the specific styles for the floating action button component
 * in the SkillVo design system. This serves as the third level in our 
 * three-tier styling architecture:
 * 1. sv-ui-control-base - Base styles for all interactive controls
 * 2. sv-action-control-base - Base styles for action controls
 * 3. sv-fab (this file) - Component-specific styles for floating action buttons
 */

/* ==========================================================================
   TABLE OF CONTENTS:
   
   1. IMPORTS
   2. VARIABLES & CONFIGURATION
   3. FLOATING ACTION BUTTON BASE
   4. FAB VARIANTS
   5. FAB SIZES
   6. FAB POSITIONS
   7. FAB ANIMATIONS
   8. FAB ACCESSIBILITY
   9. EXTENDED FAB (WITH TEXT)
   ========================================================================== */

/* ==========================================================================
   1. IMPORTS
   ========================================================================== */
@use './../../abstracts' as *;
@use './../../base/utils/mixins/state' as state;
@use './../../base/utils/mixins/layout' as layout;
@use './../../base/utils/mixins/responsive' as responsive;

/* ==========================================================================
   2. VARIABLES & CONFIGURATION
   ========================================================================== */

// FAB-specific variables
$fab-z-index: var(--sv-z-index-fab);
$fab-border-radius: var(--sv-radius-full);
$fab-box-shadow: var(--sv-shadow-lg);
$fab-box-shadow-hover: var(--sv-shadow-xl);
$fab-box-shadow-active: var(--sv-shadow-md);
$fab-padding: var(--sv-space-3);
$fab-padding-sm: var(--sv-space-2);
$fab-padding-lg: var(--sv-space-4);
$fab-icon-size: var(--sv-icon-size-lg);
$fab-icon-size-md: var(--sv-icon-size-md);
$fab-icon-size-xl: var(--sv-icon-size-xl);
$fab-position-offset: var(--sv-space-4);
$fab-hover-offset: -4px;
$fab-pulse-shadow-color: rgba(var(--sv-primary-rgb), 0.7);

/* ==========================================================================
   3. FLOATING ACTION BUTTON BASE
   ========================================================================== */

.sv-fab {
  // Extend the action control base to inherit all shared properties
  @extend .sv-action-control-base !optional;
  
  // FAB-specific properties
  position: fixed;
  z-index: $fab-z-index;
  border-radius: $fab-border-radius;
  box-shadow: $fab-box-shadow;
  aspect-ratio: 1/1;
  padding: $fab-padding;
  
  // Sizing for icons within FAB
  > .sv-icon {
    width: $fab-icon-size;
    height: $fab-icon-size;
  }
  
  // Default positioning (bottom right)
  bottom: $fab-position-offset;
  right: $fab-position-offset;
  
  // Custom hover effect
  &:hover:not(:disabled):not(.disabled) {
    transform: translateY($fab-hover-offset);
    box-shadow: $fab-box-shadow-hover;
  }
  
  // Custom active effect
  &:active:not(:disabled):not(.disabled) {
    transform: translateY(0);
    box-shadow: $fab-box-shadow-active;
  }
}

/* ==========================================================================
   4. FAB VARIANTS
   ========================================================================== */

.sv-fab {
  // Primary FAB (default)
  &.sv-fab-primary {
    @extend .sv-action-primary !optional;
  }
  
  // Secondary FAB
  &.sv-fab-secondary {
    @extend .sv-action-secondary !optional;
  }
  
  // Subtle FAB
  &.sv-fab-subtle {
    background-color: var(--sv-bg-element);
    color: var(--sv-text-primary);
    border-color: var(--sv-border-light);
    
    &:hover:not(:disabled):not(.disabled) {
      background-color: var(--sv-bg-element-hover);
      color: var(--sv-primary);
    }
  }
  
  // Branded FAB
  &.sv-fab-branded {
    background-color: var(--sv-brand-primary);
    color: var(--sv-text-on-dark);
    border-color: var(--sv-brand-primary);
    
    &:hover:not(:disabled):not(.disabled) {
      background-color: var(--sv-brand-primary-dark);
      border-color: var(--sv-brand-primary-dark);
    }
  }
}

/* ==========================================================================
   5. FAB SIZES
   ========================================================================== */

.sv-fab {
  // Small FAB
  &.sv-size-sm {
    padding: $fab-padding-sm;
    
    > .sv-icon {
      width: $fab-icon-size-md;
      height: $fab-icon-size-md;
    }
  }
  
  // Large FAB
  &.sv-size-lg {
    padding: $fab-padding-lg;
    
    > .sv-icon {
      width: $fab-icon-size-xl;
      height: $fab-icon-size-xl;
    }
  }
}

/* ==========================================================================
   6. FAB POSITIONS
   ========================================================================== */

.sv-fab {
  // Position variants
  &.sv-fab-bottom-right {
    bottom: $fab-position-offset;
    right: $fab-position-offset;
  }
  
  &.sv-fab-bottom-left {
    bottom: $fab-position-offset;
    left: $fab-position-offset;
  }
  
  &.sv-fab-top-right {
    top: $fab-position-offset;
    right: $fab-position-offset;
    bottom: auto;
  }
  
  &.sv-fab-top-left {
    top: $fab-position-offset;
    left: $fab-position-offset;
    bottom: auto;
    right: auto;
  }
  
  &.sv-fab-center-right {
    top: 50%;
    right: $fab-position-offset;
    bottom: auto;
    transform: translateY(-50%);
    
    &:hover:not(:disabled):not(.disabled) {
      transform: translate($fab-hover-offset, -50%);
    }
    
    &:active:not(:disabled):not(.disabled) {
      transform: translateY(-50%);
    }
  }
  
  &.sv-fab-center-left {
    top: 50%;
    left: $fab-position-offset;
    bottom: auto;
    right: auto;
    transform: translateY(-50%);
    
    &:hover:not(:disabled):not(.disabled) {
      transform: translate(4px, -50%);
    }
    
    &:active:not(:disabled):not(.disabled) {
      transform: translateY(-50%);
    }
  }
  
  // Adjustable position (using CSS custom properties)
  &.sv-fab-custom-position {
    top: var(--sv-fab-top, auto);
    right: var(--sv-fab-right, auto);
    bottom: var(--sv-fab-bottom, auto);
    left: var(--sv-fab-left, auto);
  }
}

/* ==========================================================================
   7. FAB ANIMATIONS
   ========================================================================== */

.sv-fab {
  // Entrance animation
  &.sv-fab-animate-in {
    animation: fab-entrance 0.3s var(--sv-motion-ease-accelerate);
    
    @keyframes fab-entrance {
      from {
        opacity: 0;
        transform: scale(0.8) translateY(20px);
      }
      to {
        opacity: 1;
        transform: scale(1) translateY(0);
      }
    }
  }
  
  // Pulse animation for attention
  &.sv-fab-pulse {
    animation: fab-pulse 2s infinite;
    
    @keyframes fab-pulse {
      0% {
        box-shadow: 0 0 0 0 $fab-pulse-shadow-color;
      }
      70% {
        box-shadow: 0 0 0 15px rgba(var(--sv-primary-rgb), 0);
      }
      100% {
        box-shadow: 0 0 0 0 rgba(var(--sv-primary-rgb), 0);
      }
    }
  }
  
  // Respect reduced motion preferences
  @media (prefers-reduced-motion: reduce) {
    &.sv-fab-animate-in, &.sv-fab-pulse {
      animation: none;
    }
  }
}

/* ==========================================================================
   8. FAB ACCESSIBILITY
   ========================================================================== */

.sv-fab {
  // Enhanced focus visibility
  &:focus-visible {
    outline: var(--sv-focus-ring-width) solid var(--sv-focus-ring-color);
    outline-offset: var(--sv-focus-ring-offset);
  }
  
  // Screen reader text
  .sv-sr-only {
    position: absolute;
    width: 1px;
    height: 1px;
    padding: 0;
    margin: -1px;
    overflow: hidden;
    clip: rect(0, 0, 0, 0);
    white-space: nowrap;
    border-width: 0;
  }
}

/* ==========================================================================
   9. EXTENDED FAB (WITH TEXT)
   ========================================================================== */

.sv-fab {
  // Extended FAB with text label
  &.sv-fab-extended {
    aspect-ratio: auto;
    padding: var(--sv-space-2) var(--sv-space-4);
    border-radius: var(--sv-radius-full);
    display: inline-flex;
    align-items: center;
    
    // Spacing between icon and text
    > .sv-icon + span,
    > span + .sv-icon {
      margin-left: var(--sv-space-2);
    }
    
    // Text styling
    > span {
      font-weight: var(--sv-font-medium);
      letter-spacing: 0.5px;
    }
    
    // Collapse to normal FAB on mobile if needed
    &.sv-fab-collapse-on-mobile {
      @media (max-width: 576px) {
        aspect-ratio: 1/1;
        padding: var(--sv-space-3);
        
        > span {
          display: none;
        }
        
        > .sv-icon {
          margin: 0;
        }
      }
    }
  }
}