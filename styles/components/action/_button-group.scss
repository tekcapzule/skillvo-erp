/**
 * Button Group Component - Specific Styles
 * Version: 1.1.0
 * Last Updated: June 30, 2024
 * 
 * This file establishes the specific styles for the button group component
 * in the SkillVo design system. This serves as the third level in our 
 * three-tier styling architecture:
 * 1. sv-ui-control-base - Base styles for all interactive controls
 * 2. sv-action-control-base - Base styles for action controls
 * 3. sv-button-group (this file) - Component-specific styles for button groups
 */

/* ==========================================================================
   TABLE OF CONTENTS:
   
   1. IMPORTS
   2. BUTTON GROUP BASE
   3. BUTTON GROUP VARIANTS
   4. BUTTON GROUP ORIENTATIONS
   5. BUTTON GROUP SPACING VARIANTS
   6. BUTTON GROUP STATES
   7. BUTTON GROUP RESPONSIVE
   ========================================================================== */

/* ==========================================================================
   1. IMPORTS
   ========================================================================== */
@use './../../abstracts/' as *;
@use './../../base/' as *;

/* ==========================================================================
   2. BUTTON GROUP BASE
   ========================================================================== */

.sv-button-group {
  // Basic container styling
  display: inline-flex;
  vertical-align: middle;
  position: relative;
  
  // Basic button group styling
  > .sv-button,
  > .sv-icon-button {
    // Flatten borders between items
    position: relative;
    border-radius: 0;
    margin-right: -1px; // Collapse borders between buttons
    
    // Ensure buttons don't double in size when border collapses
    box-sizing: border-box;
    
    // Remove active transform from buttons in a group
    &:active:not(:disabled):not(.disabled) {
      transform: none;
    }
    
    // First button
    &:first-child {
      border-top-left-radius: var(--sv-radius-md);
      border-bottom-left-radius: var(--sv-radius-md);
    }
    
    // Last button
    &:last-child {
      border-top-right-radius: var(--sv-radius-md);
      border-bottom-right-radius: var(--sv-radius-md);
      margin-right: 0;
    }
    
    // Ensure focus state is visible above other buttons
    &:focus {
      z-index: 1;
    }
    
    // Handle hover overlap
    &:hover {
      z-index: 2;
    }
    
    // Handle active state overlap
    &:active,
    &.active,
    &[aria-pressed="true"],
    &[aria-checked="true"],
    &[aria-selected="true"] {
      z-index: 3;
    }
  }
}

/* ==========================================================================
   3. BUTTON GROUP VARIANTS
   ========================================================================== */

// Primary button group
.sv-button-group.sv-button-group-primary {
  > .sv-button,
  > .sv-icon-button {
    @extend .sv-action-primary;
    
    // Enhance visibility of borders for adjacent primary buttons
    border-right-color: rgba(255, 255, 255, 0.2);
    
    &:last-child {
      border-right-color: var(--sv-primary);
    }
    
    &:hover {
      background-color: var(--sv-primary-dark);
    }
  }
}

// Secondary button group
.sv-button-group.sv-button-group-secondary {
  > .sv-button,
  > .sv-icon-button {
    @extend .sv-action-secondary;
  }
}

// Outline button group
.sv-button-group.sv-button-group-outline {
  > .sv-button,
  > .sv-icon-button {
    background-color: transparent;
    border-color: var(--sv-border-medium);
    color: var(--sv-text-primary);
    
    &:hover:not(:disabled):not(.disabled) {
      background-color: var(--sv-bg-element-hover);
      z-index: 1;
    }
    
    &:active:not(:disabled):not(.disabled),
    &[aria-pressed="true"] {
      background-color: var(--sv-bg-element-active);
      z-index: 2;
    }
  }
}

// Text button group
.sv-button-group.sv-button-group-text {
  > .sv-button,
  > .sv-icon-button {
    background-color: transparent;
    border-color: transparent;
    
    // No border collapses for text buttons
    margin-right: 0;
    
    &:hover:not(:disabled):not(.disabled) {
      background-color: var(--sv-bg-element-hover);
    }
    
    &:active:not(:disabled):not(.disabled),
    &[aria-pressed="true"] {
      background-color: var(--sv-bg-element-active);
    }
  }
}

/* ==========================================================================
   4. BUTTON GROUP ORIENTATIONS
   ========================================================================== */

// Vertical button group
.sv-button-group.sv-button-group-vertical {
  flex-direction: column;
  align-items: stretch;
  
  > .sv-button,
  > .sv-icon-button {
    margin-right: 0;
    margin-bottom: -1px; // Collapse borders vertically
    
    // Reset horizontal radius
    border-radius: 0;
    
    // First button
    &:first-child {
      border-top-left-radius: var(--sv-radius-md);
      border-top-right-radius: var(--sv-radius-md);
      border-bottom-left-radius: 0;
      border-bottom-right-radius: 0;
    }
    
    // Last button
    &:last-child {
      border-top-left-radius: 0;
      border-top-right-radius: 0;
      border-bottom-left-radius: var(--sv-radius-md);
      border-bottom-right-radius: var(--sv-radius-md);
      margin-bottom: 0;
    }
  }
}

/* ==========================================================================
   5. BUTTON GROUP SPACING VARIANTS
   ========================================================================== */

// Spaced button group
.sv-button-group.sv-button-group-spaced {
  > .sv-button,
  > .sv-icon-button {
    margin-right: var(--sv-space-2);
    border-radius: var(--sv-radius-md); // Restore individual button radius
    
    &:last-child {
      margin-right: 0;
    }
  }
  
  // Vertical spaced button group
  &.sv-button-group-vertical {
    > .sv-button,
    > .sv-icon-button {
      margin-right: 0;
      margin-bottom: var(--sv-space-2);
      
      &:last-child {
        margin-bottom: 0;
      }
    }
  }
}

// Pill shaped button group
.sv-button-group.sv-button-group-pill {
  > .sv-button,
  > .sv-icon-button {
    &:first-child {
      border-top-left-radius: var(--sv-radius-full);
      border-bottom-left-radius: var(--sv-radius-full);
    }
    
    &:last-child {
      border-top-right-radius: var(--sv-radius-full);
      border-bottom-right-radius: var(--sv-radius-full);
    }
  }
  
  &.sv-button-group-vertical {
    > .sv-button,
    > .sv-icon-button {
      &:first-child {
        border-top-left-radius: var(--sv-radius-full);
        border-top-right-radius: var(--sv-radius-full);
        border-bottom-left-radius: 0;
        border-bottom-right-radius: 0;
      }
      
      &:last-child {
        border-top-left-radius: 0;
        border-top-right-radius: 0;
        border-bottom-left-radius: var(--sv-radius-full);
        border-bottom-right-radius: var(--sv-radius-full);
      }
    }
  }
}

/* ==========================================================================
   6. BUTTON GROUP STATES
   ========================================================================== */

// Segmented button group (where one button is always selected)
.sv-button-group.sv-button-group-segmented {
  > .sv-button,
  > .sv-icon-button {
    &[aria-pressed="true"],
    &[aria-checked="true"],
    &[aria-selected="true"] {
      background-color: var(--sv-bg-element-active);
      color: var(--sv-primary);
      border-color: var(--sv-primary);
      font-weight: var(--sv-font-medium);
    }
  }
  
  // Primary segmented group
  &.sv-button-group-primary {
    > .sv-button,
    > .sv-icon-button {
      &[aria-pressed="true"],
      &[aria-checked="true"],
      &[aria-selected="true"] {
        background-color: var(--sv-primary-dark);
        color: var(--sv-text-on-dark);
      }
    }
  }
}

// Disabled button group
.sv-button-group.sv-button-group-disabled {
  opacity: var(--sv-opacity-disabled);
  pointer-events: none;
  
  > .sv-button,
  > .sv-icon-button {
    pointer-events: none;
  }
}

/* ==========================================================================
   7. BUTTON GROUP RESPONSIVE
   ========================================================================== */

// Full width on small screens
.sv-button-group.sv-button-group-responsive {
  @media (max-width: 576px) {
    display: flex;
    width: 100%;
    
    > .sv-button,
    > .sv-icon-button {
      flex: 1;
    }
  }
}

// Stack vertically on small screens
.sv-button-group.sv-button-group-stack-on-mobile {
  @media (max-width: 576px) {
    flex-direction: column;
    align-items: stretch;
    
    > .sv-button,
    > .sv-icon-button {
      margin-right: 0;
      margin-bottom: -1px;
      border-radius: 0;
      
      &:first-child {
        border-top-left-radius: var(--sv-radius-md);
        border-top-right-radius: var(--sv-radius-md);
        border-bottom-left-radius: 0;
        border-bottom-right-radius: 0;
      }
      
      &:last-child {
        border-top-left-radius: 0;
        border-top-right-radius: 0;
        border-bottom-left-radius: var(--sv-radius-md);
        border-bottom-right-radius: var(--sv-radius-md);
        margin-bottom: 0;
      }
    }
  }
}